<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_payment_voucher_document">
        <t t-call="web.external_layout">
            <t t-set="o" t-value="o.with_context(lang=lang)"/>
            <div class="page">
                <!-- Customer Copy Section -->
                <div class="receipt-voucher-section" style="margin-bottom: 40px; padding: 20px; border: 1px solid #ddd;">
                    <!-- Header -->
                    <div class="text-center mb-4">
                        <h2 style="font-weight: bold; margin-bottom: 10px;">RECEIPT VOUCHER</h2>
                    </div>

                    <!-- Amount and Date Row -->
                    <div class="row mb-3">
                        <div class="col-6">
                            <strong>Amount: <span t-field="o.amount" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                            </strong>
                        </div>
                        <div class="col-6 text-end">
                            <strong>Date: <span t-field="o.date"/>
                            </strong>
                        </div>
                    </div>

                    <!-- Received From -->
                    <div class="mb-3">
                        <strong>Received from: </strong>
                        <span t-if="o.partner_id">
                            <span t-if="o.partner_id.title">Mr./Ms. </span>
                            <span t-field="o.partner_id.name"/>
                        </span>
                        <span t-if="not o.partner_id">_________________________</span>
                        <div style="border-bottom: 1px dotted #000; margin-top: 2px; min-height: 15px;"></div>
                    </div>

                    <!-- Amount in Words -->
                    <div class="mb-3">
                        <strong>Sum of: </strong>
                        <span t-esc="o._get_amount_in_words()"/>
                        <div style="border-bottom: 1px dotted #000; margin-top: 2px; min-height: 15px;"></div>
                    </div>

                    <!-- Purpose/Being -->
                    <div class="mb-4">
                        <strong>Being: </strong>
                        <span t-if="o.voucher_purpose" t-field="o.voucher_purpose"/>
                        <span t-if="o.ref and not o.voucher_purpose" t-field="o.ref"/>
                        <span t-if="not o.voucher_purpose and not o.ref"></span>
                        <div style="border-bottom: 1px dotted #000; margin-top: 5px; min-height: 20px;"></div>
                    </div>

                    <!-- Signature Section -->
                    <div class="row mt-4">
                        <div class="col-4 text-center">
                            <div style="border-bottom: 1px dotted #000; margin-bottom: 5px; min-height: 30px;"></div>
                            <small>
                                <strong>
                                    <span t-field="o.create_uid.name"/>
 Account</strong>
                            </small>
                        </div>
                        <div class="col-4 text-center">
                            <div style="border-bottom: 1px dotted #000; margin-bottom: 5px; min-height: 30px;"></div>
                            <small>
                                <strong>Manager</strong>
                            </small>
                        </div>
                        <div class="col-4 text-center">
                            <div style="border-bottom: 1px dotted #000; margin-bottom: 5px; min-height: 30px;"></div>
                            <small>
                                <strong>Receiver's Signature</strong>
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Office Copy Section with Watermark -->
                <div class="receipt-voucher-section office-copy" style="position: relative; padding: 20px; border: 1px solid #ddd;">
                    <!-- Office Copy Watermark -->
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg); font-size: 48px; color: rgba(0,0,0,0.1); font-weight: bold; z-index: 1; pointer-events: none;">OFFICE COPY</div>

                    <!-- Header -->
                    <div class="text-center mb-4" style="position: relative; z-index: 2;">
                        <h2 style="font-weight: bold; margin-bottom: 10px;">RECEIPT VOUCHER</h2>
                    </div>

                    <!-- Amount and Date Row -->
                    <div class="row mb-3" style="position: relative; z-index: 2;">
                        <div class="col-6">
                            <strong>Amount: <span t-field="o.amount" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                            </strong>
                        </div>
                        <div class="col-6 text-end">
                            <strong>Date: <span t-field="o.date"/>
                            </strong>
                        </div>
                    </div>

                    <!-- Received From -->
                    <div class="mb-3" style="position: relative; z-index: 2;">
                        <strong>Received from: </strong>
                        <span t-if="o.partner_id">
                            <span t-if="o.partner_id.title">Mr./Ms. </span>
                            <span t-field="o.partner_id.name"/>
                        </span>
                        <span t-if="not o.partner_id">_________________________</span>
                        <div style="border-bottom: 1px dotted #000; margin-top: 2px; min-height: 15px;"></div>
                    </div>

                    <!-- Amount in Words -->
                    <div class="mb-3" style="position: relative; z-index: 2;">
                        <strong>Sum of: </strong>
                        <span t-esc="o._get_amount_in_words()"/>
                        <div style="border-bottom: 1px dotted #000; margin-top: 2px; min-height: 15px;"></div>
                    </div>

                    <!-- Purpose/Being -->
                    <div class="mb-4" style="position: relative; z-index: 2;">
                        <strong>Being: </strong>
                        <span t-if="o.voucher_purpose" t-field="o.voucher_purpose"/>
                        <span t-if="o.ref and not o.voucher_purpose" t-field="o.ref"/>
                        <span t-if="not o.voucher_purpose and not o.ref"></span>
                        <div style="border-bottom: 1px dotted #000; margin-top: 5px; min-height: 20px;"></div>
                    </div>

                    <!-- Journal Information (Office Copy Only) -->
                    <div class="mb-4" style="position: relative; z-index: 2;">
                        <strong>Journal: </strong>
                        <span t-field="o.journal_id.name"/>
                        <div style="border-bottom: 1px dotted #000; margin-top: 5px; min-height: 20px;"></div>
                    </div>

                    <!-- Signature Section -->
                    <div class="row mt-4" style="position: relative; z-index: 2;">
                        <div class="col-4 text-center">
                            <div style="border-bottom: 1px dotted #000; margin-bottom: 5px; min-height: 30px;"></div>
                            <small>
                                <strong>
                                    <span t-field="o.create_uid.name"/>
 Account</strong>
                            </small>
                        </div>
                        <div class="col-4 text-center">
                            <div style="border-bottom: 1px dotted #000; margin-bottom: 5px; min-height: 30px;"></div>
                            <small>
                                <strong>Manager</strong>
                            </small>
                        </div>
                        <div class="col-4 text-center">
                            <div style="border-bottom: 1px dotted #000; margin-bottom: 5px; min-height: 30px;"></div>
                            <small>
                                <strong>Receiver's Signature</strong>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="report_payment_voucher">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang or o.company_id.partner_id.lang"/>
                <t t-call="sales_move.report_payment_voucher_document" t-lang="lang"/>
            </t>
        </t>
    </template>
</odoo>
